# 通用移位寄存器

该移位寄存器可以实现左移位寄存、右移位寄存、不移位寄存、同步置位、同步清零等功能；可以设置存储位宽。
寄存器同步功能受时钟信号上升沿触发。

## 端口和参数

### 模块名

`univ_shift_reg`来自文件[univ_shift_reg.v](univ_shift_reg.v)

### 可调参数

DW：存储位宽(data width)，默认为4
使用测试模块时注意修改DW值。

### 端口

|信号|in/out|位宽|描述|
|:-:|:-:|:-:|:-:|
|`clk`|输入|1|时钟信号|
|`sync_rst`|输入|1|同步清零控制|
|`ctrl`|输入|2|移位和存储模式控制|
|`data`|输入|DW|同步置位输入数据|
|`data_l`|输入|1|左移位低位输入数据|
|`data_h`|输入|1|右移位高位输入数据|
|`q`|输出|DW|寄存器存储数据|

## 功能

同步清零：`sync_rst`信号被拉高时，在时钟上升沿将各存储数据位置0。
同步置位：`ctrl`信号被拉低时，在时钟上升沿将存储数据置为`data`。
左移位寄存：`ctrl`仅高位信号拉高时，在每个时钟上升沿将存储数据左移1位；最高位移出后丢弃，最低位用输入`data_l`补齐。
右移位寄存：`ctrl`仅低位信号拉高时，在每个时钟上升沿将存储数据右移1位；最低位移出后丢弃，最高位用输入`data_h`补齐。
不移位寄存：`ctrl`两位信号均被拉高时，寄存器保持当前存储数据不变。

各功能相应控制端信号如下表：

|功能|`sync_rst`|`ctrl`|输入数据读取情况|
|:-:|:-:|:-:|:-:|
|**同步清零**|1|x|封闭|
|**同步置位**|0|00|上升沿时读取`data`|
|**右移位寄存**|0|01|上升沿时读取`data_h`|
|**左移位寄存**|0|10|上升沿时读取`data_l`|
|**不移位寄存**|0|11|封闭|

先同步置位后开启移位寄存，读取某一位输出数据，可实现并行输入转换为串行输出。
先同步清零后开启移位寄存，读取全部输出数据，可实现串行输入转换为并行输出。